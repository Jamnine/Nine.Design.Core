<pu:WindowX
    x:Class="Nine.Design.PollingTool.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:LayoutControl="clr-namespace:Nine.Design.Clientbase;assembly=Nine.Design.Clientbase"
    xmlns:cmd="clr-namespace:Nine.Design.Clientbase;assembly=Nine.Design.Clientbase"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:Nine.Design.PollingTool"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ndcui="clr-namespace:Nine.Design.UI;assembly=Nine.Design.UI"
    xmlns:pu="clr-namespace:Panuon.WPF.UI;assembly=Panuon.WPF.UI"
    xmlns:pucore="clr-namespace:Panuon.WPF;assembly=Panuon.WPF"
    xmlns:pul="https://opensource.panuon.com/wpf-ui"
    xmlns:purs="clr-namespace:Panuon.WPF.UI.Resources;assembly=Panuon.WPF.UI"
    MinWidth="1000"
    MinHeight="600"
    pu:ScrollBarHelper.HoverThumbBackground="{DynamicResource ThemeBrush}"
    pu:ScrollBarHelper.ThumbBackground="{DynamicResource ThemeBrushTrans6}"
    pu:WindowXCaption.Height="0"
    ResizeMode="CanResizeWithGrip"
    SizeChanged="MetroWindow_SizeChanged"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <!--  全局样式统一：保留原有主题色 + 适配Panuon控件  -->
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!--  新项目原有资源字典  -->
                <ResourceDictionary>
                    <pu:ToastSettings x:Key="toastSetting" Spacing="0">
                        <pu:ToastSettings.LabelStyle>
                            <Style BasedOn="{StaticResource {x:Static pu:Toast.LabelStyleKey}}" TargetType="Label">
                                <Setter Property="Background" Value="#ffb7c5" />
                                <Setter Property="Foreground" Value="#FFFFFF" />
                                <Setter Property="pu:LabelHelper.CornerRadius" Value="15" />
                                <Setter Property="pu:LabelHelper.ShadowColor" Value="#ffb7c5" />
                                <Setter Property="pu:ShadowHelper.Opacity" Value="0.3" />
                            </Style>
                        </pu:ToastSettings.LabelStyle>
                    </pu:ToastSettings>
                </ResourceDictionary>
                <ResourceDictionary>
                    <FontFamily x:Key="PanuonIconFont">/Panuon.WPF.UI;component/Resources/Fonts/#PanuonIcon</FontFamily>
                </ResourceDictionary>
                <pul:StyleDictionary Includes="All" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/ToggleButtonStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/SearchBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/LabelStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/PasswordBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/GroupBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/ComboBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/TextBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/DropDownStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/ButtonStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/ListBoxStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Themes/Light.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/TrayMenuItemStyle.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Nine.Design.UI;component/Styles/CirclePointRingLoading.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <!--  原有主题色（保留不变）  -->
            <SolidColorBrush x:Key="PrimaryColor" Color="#2C3E50" />
            <SolidColorBrush x:Key="SecondaryColor" Color="#3498DB" />
            <SolidColorBrush x:Key="SuccessColor" Color="#2ECC71" />
            <SolidColorBrush x:Key="WarningColor" Color="#F39C12" />
            <SolidColorBrush x:Key="DangerColor" Color="#E74C3C" />
            <SolidColorBrush x:Key="NeutralColor" Color="#ECF0F1" />
            <SolidColorBrush x:Key="TextPrimaryColor" Color="#2C3E50" />
            <SolidColorBrush x:Key="TextSecondaryColor" Color="#7F8C8D" />

            <!--  通用样式 - 改为相对尺寸 + 适配Panuon控件  -->
            <Style x:Key="LabelStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource TextSecondaryColor}" />
                <Setter Property="FontSize" Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=9}" />
                <Setter Property="Margin" Value="0,0,5,0" />
            </Style>

            <Style x:Key="InputStyle" TargetType="TextBox">
                <Setter Property="Padding" Value="8" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="BorderBrush" Value="{StaticResource SecondaryColor}" />
                <Setter Property="FontSize" Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=9}" />
                <Setter Property="Margin" Value="0,3,0,5" />
                <Setter Property="VerticalContentAlignment" Value="Top" />
                <!--  替换MahApps附加属性为Panuon对应实现  -->
                <Setter Property="pu:TextBoxHelper.CornerRadius" Value="4" />
                <Setter Property="pu:TextBoxHelper.FocusedBorderBrush" Value="{StaticResource PrimaryColor}" />
                <Style.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter Property="BorderBrush" Value="{StaticResource PrimaryColor}" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource SecondaryColor}" />
                <Setter Property="Foreground" Value="White" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Padding" Value="12,6" />
                <Setter Property="FontSize" Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=9}" />
                <Setter Property="FontWeight" Value="Medium" />
                <Setter Property="Margin" Value="0,0,8,0" />
                <!--  增加Panuon按钮圆角样式  -->
                <Setter Property="pu:ButtonHelper.CornerRadius" Value="4" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource PrimaryColor}" />
                        <Setter Property="Cursor" Value="Hand" />
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" Value="#1A5276" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Background" Value="{StaticResource TextSecondaryColor}" />
                        <Setter Property="Foreground" Value="LightGray" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!--  机器项模板 - 保留原有结构 + 适配Panuon  -->
            <DataTemplate x:Key="MachineItemTemplate">
                <Border
                    Margin="4"
                    Padding="8"
                    Background="{StaticResource NeutralColor}"
                    BorderBrush="{StaticResource SecondaryColor}"
                    BorderThickness="1"
                    CornerRadius="4">
                    <StackPanel
                        MinWidth="180"
                        MaxWidth="250"
                        Orientation="Vertical">
                        <TextBlock
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=13}"
                            FontWeight="SemiBold"
                            Foreground="{StaticResource PrimaryColor}"
                            Text="{Binding Name}" />
                        <TextBlock
                            Margin="0,2,0,4"
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                            FontStyle="Italic"
                            Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"
                            Text="{Binding Status}" />
                        <TextBlock
                            x:Name="detailsTextBlock"
                            Margin="0,2,0,4"
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                            Foreground="{StaticResource TextSecondaryColor}"
                            Text="{Binding Details}"
                            TextWrapping="Wrap"
                            Visibility="Collapsed" />
                        <Button
                            MinWidth="70"
                            MaxWidth="90"
                            Margin="0,4,0,0"
                            Padding="8,4"
                            HorizontalAlignment="Left"
                            Background="{StaticResource TextSecondaryColor}"
                            Click="ToggleDetails_Click"
                            Content="详情"
                            Style="{StaticResource ButtonStyle}" />
                    </StackPanel>
                </Border>
            </DataTemplate>

            <!--  状态颜色转换器（保留，需确保后台已定义）  -->
            <local:StatusToColorConverter x:Key="StatusToColorConverter" />
        </ResourceDictionary>
    </Window.Resources>

    <!--  保留原有布局结构，移除MahApps依赖，适配Panuon  -->
    <Grid Background="#FAFAFA">
        <!--  顶部标题栏 - 相对高度（替换MahApps标题栏为原生Grid）  -->
        <Grid
            Height="50"
            VerticalAlignment="Top"
            Background="{StaticResource PrimaryColor}">
            <StackPanel
                Margin="20,0,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center">
                <TextBlock
                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=13}"
                    FontWeight="Bold"
                    Foreground="White"
                    Text="轮询接口测试工具" />
                <TextBlock
                    Margin="0,2,0,0"
                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=8}"
                    Foreground="#E0E0E0"
                    Text="高性能多机器轮询 | 实时统计监控" />
            </StackPanel>
        </Grid>

        <!--  主内容区域（避开标题栏）  -->
        <Grid Margin="0,45,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <!--  参数配置行  -->
                <RowDefinition Height="Auto" />
                <!--  功能按钮行  -->
                <RowDefinition Height="*" />
                <!--  主体内容行  -->
            </Grid.RowDefinitions>

            <!--  第一行：参数配置区域 - 自适应宽度  -->
            <Grid
                Grid.Row="0"
                Margin="20,20,20,10"
                Background="White">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" MinWidth="300" />
                    <!--  基础参数 - 比例宽度  -->
                    <ColumnDefinition Width="1*" MinWidth="300" />
                    <!--  请求参数 - 比例宽度  -->
                    <ColumnDefinition Width="1.5*" MinWidth="350" />
                    <!--  历史记录 - 比例宽度  -->
                </Grid.ColumnDefinitions>

                <!--  左侧：基础参数  -->
                <StackPanel Grid.Column="0">
                    <TextBlock
                        Margin="0,0,0,10"
                        FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                        FontWeight="SemiBold"
                        Foreground="{StaticResource PrimaryColor}"
                        Text="基础配置" />

                    <!--  轮询地址 - 自适应高度（替换MahApps Watermark为Panuon）  -->
                    <TextBlock
                        Margin="0,0,0,3"
                        Style="{StaticResource LabelStyle}"
                        Text="轮询地址：" />
                    <TextBox
                        x:Name="txtEndpoint"
                        Height="60"
                        MinWidth="280"
                        pu:TextBoxHelper.Watermark="输入轮询地址（每行一个）"
                        AcceptsReturn="True"
                        Style="{StaticResource InputStyle}"
                        TextWrapping="Wrap"
                        VerticalScrollBarVisibility="Auto" />

                    <!--  频率/机器数/请求方法 - 自适应布局  -->
                    <Grid MinWidth="280" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="1*" />
                        </Grid.ColumnDefinitions>

                        <!--  频率  -->
                        <StackPanel Grid.Column="0">
                            <TextBlock
                                FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=10}"
                                Style="{StaticResource LabelStyle}"
                                Text="请求频率：" />
                            <TextBox
                                x:Name="txtPollInterval"
                                Height="35"
                                MinWidth="70"
                                MaxWidth="90"
                                HorizontalAlignment="Left"
                                pu:TextBoxHelper.Watermark="200"
                                Style="{StaticResource InputStyle}"
                                Text="200" />
                        </StackPanel>

                        <!--  机器数  -->
                        <StackPanel Grid.Column="1">
                            <TextBlock
                                FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=10}"
                                Style="{StaticResource LabelStyle}"
                                Text="机器数量：" />
                            <TextBox
                                x:Name="txtMachineCount"
                                Height="35"
                                MinWidth="70"
                                MaxWidth="90"
                                HorizontalAlignment="Left"
                                pu:TextBoxHelper.Watermark="5"
                                Style="{StaticResource InputStyle}"
                                Text="5" />
                        </StackPanel>

                        <!--  请求方法  -->
                        <StackPanel Grid.Column="2">
                            <TextBlock
                                FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=10}"
                                Style="{StaticResource LabelStyle}"
                                Text="请求方法：" />
                            <StackPanel Orientation="Horizontal">
                                <RadioButton
                                    x:Name="rbGet"
                                    Margin="0,5,20,0"
                                    pu:RadioButtonHelper.BoxRadius="4"
                                    Content="GET"
                                    Foreground="{StaticResource TextPrimaryColor}"
                                    GroupName="HttpMethod"
                                    IsChecked="True" />
                                <RadioButton
                                    x:Name="rbPost"
                                    Margin="0,5,0,0"
                                    pu:RadioButtonHelper.BoxRadius="4"
                                    Content="POST"
                                    Foreground="{StaticResource TextPrimaryColor}"
                                    GroupName="HttpMethod" />
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <!--  中间：请求参数  -->
                <StackPanel Grid.Column="1" Margin="20,0,0,0">
                    <TextBlock
                        Margin="0,0,0,10"
                        FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                        FontWeight="SemiBold"
                        Foreground="{StaticResource PrimaryColor}"
                        Text="请求参数" />
                    <TextBlock
                        Margin="0,0,0,3"
                        Style="{StaticResource LabelStyle}"
                        Text="JSON 参数：" />
                    <TextBox
                        x:Name="txtParametersJson"
                        Height="120"
                        MinWidth="280"
                        pu:TextBoxHelper.Watermark="请求参数（JSON格式，POST请求专用）"
                        AcceptsReturn="True"
                        Style="{StaticResource InputStyle}"
                        TextWrapping="Wrap"
                        VerticalScrollBarVisibility="Auto" />
                </StackPanel>

                <!--  右侧：历史记录  -->
                <StackPanel Grid.Column="2" Margin="20,0,0,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,20,0"
                            VerticalAlignment="Center"
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                            FontWeight="SemiBold"
                            Foreground="{StaticResource PrimaryColor}"
                            Text="历史记录" />
                        <Button
                            Click="LoadFromHistory_Click"
                            Content="刷新"
                            Style="{StaticResource ButtonStyle}" />
                    </StackPanel>

                    <Grid Height="140" MinWidth="300">
                        <ListBox
                            x:Name="lbHistory"
                            Grid.Column="0"
                            pu:ListBoxHelper.CornerRadius="4"
                            SelectionChanged="LbHistory_SelectionChanged">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="2" Background="#F8F9FA">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            Grid.Column="0"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="{StaticResource SecondaryColor}"
                                            Text="{Binding SavedTime, StringFormat=\{0:MM-dd HH:mm\}}" />
                                        <TextBlock
                                            Grid.Column="1"
                                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=9}"
                                            Foreground="{StaticResource TextPrimaryColor}"
                                            Text="{Binding Endpoint}"
                                            TextTrimming="CharacterEllipsis" />
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                        </ListBox>
                    </Grid>
                </StackPanel>
            </Grid>

            <!--  第二行：功能按钮区域  -->
            <StackPanel
                Grid.Row="1"
                Margin="20,0,20,15"
                HorizontalAlignment="Right"
                Orientation="Horizontal">

                <Button
                    x:Name="btnStartPolling"
                    MinWidth="100"
                    MaxWidth="140"
                    Background="{StaticResource SuccessColor}"
                    Click="StartPolling_Click"
                    Content="开始轮询"
                    Style="{StaticResource ButtonStyle}" />
                <Button
                    x:Name="btnStopPolling"
                    MinWidth="100"
                    MaxWidth="140"
                    Background="{StaticResource DangerColor}"
                    Click="StopPolling_Click"
                    Content="停止轮询"
                    Style="{StaticResource ButtonStyle}" />
                <Button
                    x:Name="btnClearLogs"
                    MinWidth="100"
                    MaxWidth="140"
                    Background="{StaticResource WarningColor}"
                    Click="ClearLogs_Click"
                    Content="清空日志"
                    Style="{StaticResource ButtonStyle}" />
            </StackPanel>

            <!--  第三行：主体内容（机器列表 + 统计 + 日志）  -->
            <Grid Grid.Row="2" Margin="20,0,20,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="auto"
                        MinWidth="250"
                        MaxWidth="350" />
                    <!--  机器列表 - 自适应宽度  -->
                    <ColumnDefinition Width="*" MinWidth="500" />
                    <!--  统计+日志 - 占满剩余宽度  -->
                </Grid.ColumnDefinitions>

                <!--  左侧：机器列表  -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40" />
                        <!--  标题  -->
                        <RowDefinition Height="*" />
                        <!--  列表  -->
                    </Grid.RowDefinitions>

                    <!--  机器列表标题  -->
                    <Border
                        Grid.Row="0"
                        Padding="10"
                        Background="{StaticResource PrimaryColor}"
                        CornerRadius="6,6,0,0">
                        <TextBlock
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                            FontWeight="SemiBold"
                            Foreground="White"
                            Text="机器列表" />
                    </Border>

                    <!--  机器列表内容（适配Panuon ScrollViewer样式）  -->
                    <ScrollViewer
                        Grid.Row="1"
                        Margin="0,0,0,0"
                        pu:ScrollBarHelper.ThumbBackground="{StaticResource SecondaryColor}"
                        Background="White"
                        BorderBrush="{StaticResource SecondaryColor}"
                        BorderThickness="1,0,1,1"
                        HorizontalScrollBarVisibility="Disabled"
                        VerticalScrollBarVisibility="Auto">
                        <ItemsControl
                            x:Name="icMachines"
                            Padding="10"
                            ItemTemplate="{StaticResource MachineItemTemplate}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>

                <!--  右侧：统计+日志  -->
                <Grid Grid.Column="1" Margin="15,0,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" MinHeight="80" />
                        <!--  统计面板 - 自适应高度  -->
                        <RowDefinition Height="*" />
                        <!--  日志  -->
                    </Grid.RowDefinitions>

                    <!--  实时统计面板 - 修复遮挡问题  -->
                    <Border
                        Grid.Row="0"
                        Padding="10"
                        Background="White"
                        BorderBrush="{StaticResource SecondaryColor}"
                        BorderThickness="1"
                        CornerRadius="6">
                        <Grid>
                            <!--  改为5个等宽列，实现平分  -->
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  总请求数（居中）  -->
                            <StackPanel
                                Grid.Column="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    Foreground="{StaticResource TextSecondaryColor}"
                                    Text="总请求数" />
                                <TextBlock
                                    x:Name="txtTotalRequests"
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=20}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource PrimaryColor}"
                                    Text="0" />
                            </StackPanel>

                            <!--  成功请求数（居中）  -->
                            <StackPanel
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    Foreground="{StaticResource TextSecondaryColor}"
                                    Text="成功请求数" />
                                <TextBlock
                                    x:Name="txtSuccessRequests"
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=20}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource SuccessColor}"
                                    Text="0" />
                            </StackPanel>

                            <!--  成功率（居中）  -->
                            <StackPanel
                                Grid.Column="2"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    Foreground="{StaticResource TextSecondaryColor}"
                                    Text="成功率" />
                                <TextBlock
                                    x:Name="txtSuccessRate"
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=20}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource SecondaryColor}"
                                    Text="0.00%" />
                            </StackPanel>

                            <!--  端口占用数（居中）  -->
                            <StackPanel
                                Grid.Column="3"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    Foreground="{StaticResource TextSecondaryColor}"
                                    Text="端口占用数" />
                                <TextBlock
                                    x:Name="txtPortUsage"
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=20}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource WarningColor}"
                                    Text="0/50000" />
                            </StackPanel>

                            <!--  运行时长（居中）  -->
                            <StackPanel
                                Grid.Column="4"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    Foreground="{StaticResource TextSecondaryColor}"
                                    Text="运行时长" />
                                <TextBlock
                                    x:Name="txtRunTime"
                                    HorizontalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=20}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource PrimaryColor}"
                                    Text="00:00:00" />
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!--  日志区域  -->
                    <Grid Grid.Row="1" Margin="0,10,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40" />
                            <!--  日志标题  -->
                            <RowDefinition Height="*" />
                            <!--  日志列表  -->
                        </Grid.RowDefinitions>

                        <!--  日志标题  -->
                        <Border
                            Grid.Row="0"
                            Padding="10"
                            Background="{StaticResource PrimaryColor}"
                            CornerRadius="6,6,0,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=11}"
                                    FontWeight="SemiBold"
                                    Foreground="White"
                                    Text="运行日志" />
                                <TextBlock
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=9}"
                                    Foreground="#E0E0E0"
                                    Text="（实时输出请求详情）" />
                            </StackPanel>
                        </Border>

                        <!--  日志列表（适配Panuon ListBox样式）  -->
                        <ListBox
                            x:Name="lbLogs"
                            Grid.Row="1"
                            Padding="10"
                            pu:ListBoxHelper.CornerRadius="0,0,6,6"
                            Background="White"
                            BorderBrush="{StaticResource SecondaryColor}"
                            BorderThickness="1,0,1,1"
                            FontFamily="Consolas"
                            FontSize="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=FontSize, Converter={local:ScaleConverter}, ConverterParameter=10}"
                            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                            ScrollViewer.VerticalScrollBarVisibility="Auto">
                            <ListBox.Resources>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Padding" Value="2" />
                                    <Setter Property="Margin" Value="0,1" />
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListBoxItem">
                                                <Border
                                                    Padding="5"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="3">
                                                    <ContentPresenter />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="#E3F2FD" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListBox.Resources>
                        </ListBox>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</pu:WindowX>